<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <div id="app">
        文章分类: <input type="text" v-model="searchConditions.category"/> 
        发布状态: <input type="text" v-model="searchConditions.state"/>
        <button v-on:click="search">搜索</button>
        <table border="1 solid" colspa="0" cellspacing="0">
            <tr>
                <th>文章标题</th>
                <th>分类</th>
                <th>发表时间</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
            <tr v-for="(article,index) in articleList">
                <td>{{article.title}}</td>
                <td>{{article.category}}</td>
                <td>{{article.time}}</td>
                <td>{{article.state}}</td>
                <td>
                    <button >编辑</button>
                    <button>删除</button>
                </td>
            </tr>
        </table>
    </div>

    <script type="module">
        //导入vue模块
        import { createApp} from 
                'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
        //创建应用实例
        createApp({
            data(){
                return {
                    articleList:[],
                    searchConditions:{
                        category:"",
                        state:""
                    }
                }
            },
            methods:{
                search(){
                    axios.get("http://localhost:8080/article/search",{
                        params:{
                            category:this.searchConditions.category,
                            state:this.searchConditions.state
                        }
                    }).then(response=>{
                        console.log(response.data)
                        this.articleList=response.data
                    }).catch(error=>{
                        console.log(error)
                    })
                }
            },
            mounted(){
                axios.get("http://localhost:8080/article/getAll")
                .then(response=>{
                    console.log(response.data)
                    this.articleList=response.data
                }).catch(error=>{
                    console.log(error)
                })
            },
            }
        ).mount("#app")//控制页面元素
    </script>
</body>
</html>